{% extends 'accounts/base_print.html' %}
{% load static %}

{% block title %}Invoice - School Management System{% endblock %}

{% block content %}
<div class="invoice-container">
    <!-- School Header -->
    <div class="text-center mb-4">
        <h2 class="school-name">School Management System</h2>
        <p class="school-address">123 Education Street, City, State - 123456</p>
        <p class="school-contact">Phone: (123) 456-7890 | Email: info@school.com</p>
    </div>

    <!-- Invoice Title -->
    <div class="text-center mb-4">
        <h3 class="invoice-title">INVOICE</h3>
        <p class="invoice-number">Invoice No: #{{ invoice.id }}</p>
    </div>

    <!-- Invoice Details -->
    <div class="invoice-details">
        <div class="row mb-4">
            <div class="col-md-6">
                <h5 class="section-title">Bill To:</h5>
                <p><strong>Student Name:</strong> {{ invoice.student.get_full_name }}</p>
                <p><strong>Student ID:</strong> {{ invoice.student.student_id }}</p>
                <p><strong>Class:</strong> {{ invoice.student.class_section }}</p>
                <p><strong>Address:</strong> {{ invoice.student.address }}</p>
            </div>
            <div class="col-md-6">
                <h5 class="section-title">Invoice Information:</h5>
                <p><strong>Issue Date:</strong> {{ invoice.created_at|date:"F d, Y" }}</p>
                <p><strong>Due Date:</strong> {{ invoice.due_date|date:"F d, Y" }}</p>
                <p><strong>Status:</strong> {{ invoice.paid|yesno:"Paid,Pending" }}</p>
            </div>
        </div>

        <!-- Invoice Items -->
        <div class="invoice-items">
            <h5 class="section-title">Invoice Items</h5>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th class="text-end">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>School Fees</td>
                        <td class="text-end">₹{{ invoice.amount }}</td>
                    </tr>
                    <tr>
                        <th>Total Amount</th>
                        <th class="text-end">₹{{ invoice.amount }}</th>
                    </tr>
                </tbody>
            </table>
        </div>

        {% if invoice.payment %}
        <!-- Payment Information -->
        <div class="payment-info mt-4">
            <h5 class="section-title">Payment Information</h5>
            <p><strong>Transaction ID:</strong> {{ invoice.payment.transaction_id }}</p>
            <p><strong>Payment Date:</strong> {{ invoice.payment.payment_date|date:"F d, Y" }}</p>
            <p><strong>Payment Method:</strong> {{ invoice.payment.payment_method }}</p>
            {% if invoice.payment.remarks %}
            <p><strong>Remarks:</strong> {{ invoice.payment.remarks }}</p>
            {% endif %}
        </div>
        {% endif %}

        <!-- Terms and Conditions -->
        <div class="terms mt-4">
            <h5 class="section-title">Terms and Conditions</h5>
            <p>1. Payment is due within 30 days of the invoice date.</p>
            <p>2. Late payments are subject to a 2% monthly fee.</p>
            <p>3. This is a computer-generated invoice and does not require a physical signature.</p>
        </div>

        <!-- Footer -->
        <div class="invoice-footer mt-4">
            <div class="row">
                <div class="col-md-6">
                    <p><strong>Authorized Signature</strong></p>
                    <div class="signature-line"></div>
                </div>
                <div class="col-md-6 text-end">
                    <p><strong>School Stamp</strong></p>
                    <div class="stamp-placeholder"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .invoice-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    .school-name {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .school-address, .school-contact {
        margin-bottom: 5px;
        color: #666;
    }

    .invoice-title {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .invoice-number {
        color: #666;
        margin-bottom: 20px;
    }

    .section-title {
        font-size: 16px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
    }

    .signature-line {
        border-top: 1px solid #000;
        width: 200px;
        margin-top: 50px;
    }

    .stamp-placeholder {
        width: 100px;
        height: 100px;
        border: 1px dashed #999;
        margin: 0 auto;
    }

    @media print {
        .invoice-container {
            padding: 0;
        }
    }
</style>
{% endblock %} 