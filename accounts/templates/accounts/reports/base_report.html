{% extends 'accounts/base_admin.html' %}
{% load static %}

{% block title %}{{ report_type }} Report - School Management System{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Report Header -->
    <div class="page-header">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="mt-4">{{ report_type }} Report</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'reports' %}">Reports</a></li>
                        <li class="breadcrumb-item active">{{ report_type }}</li>
                    </ol>
                </nav>
            </div>
            <div class="col-auto">
                <button class="btn btn-primary" onclick="printReportSection()">
                    <i class="fas fa-print me-2"></i>Print Report
                </button>
            </div>
        </div>
    </div>

    <!-- Report Content -->
    <div class="card report-print-section" id="reportPrintSection">
        <div class="card-body">
            <!-- Report Filters Summary -->
            <div class="row mb-4">
                <div class="col-md-6">
                    <h5>Report Filters</h5>
                    <ul class="list-unstyled">
                        <li><strong>Date Range:</strong> {{ start_date }} to {{ end_date }}</li>
                        {% block report_filters %}{% endblock %}
                    </ul>
                </div>
                <div class="col-md-6 text-end">
                    <p class="text-muted">Generated on: {% now "F j, Y" %}</p>
                </div>
            </div>

            <!-- Report Data -->
            {% block report_content %}{% endblock %}
        </div>
    </div>
</div>

<script>
function printReportSection() {
    var printContents = document.getElementById('reportPrintSection').innerHTML;
    var originalContents = document.body.innerHTML;
    document.body.innerHTML = printContents;
    window.print();
    document.body.innerHTML = originalContents;
    window.location.reload(); // To restore event handlers and JS
}
</script>

<style>
    @media print {
        /* Hide everything except the report section */
        body * {
            visibility: hidden !important;
        }
        #reportPrintSection, #reportPrintSection * {
            visibility: visible !important;
        }
        #reportPrintSection {
            position: absolute !important;
            left: 0;
            top: 0;
            width: 100vw !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        /* Remove background colors and borders */
        .card {
            border: 1px solid #ddd !important;
            box-shadow: none !important;
        }
        body {
            color: black !important;
            background: white !important;
        }
        .table {
            width: 100% !important;
            border-collapse: collapse !important;
        }
        .table td, .table th {
            border: 1px solid #ddd !important;
        }
        .badge {
            border: 1px solid #000 !important;
        }
    }
</style>
{% endblock %} 